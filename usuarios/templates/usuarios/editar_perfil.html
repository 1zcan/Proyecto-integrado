{% extends 'base.html' %} {% load static %} {% block title %}Editar
Perfil{%endblock %} {% block content %}
<div class="row justify-content-center">
  <div class="col-lg-9">
    <h2 class="mb-3">Editar Perfil</h2>
    <p class="text-muted mb-4">
      Actualiza tu nombre de usuario, email o foto de perfil.
    </p>

    <form method="post" enctype="multipart/form-data" class="perfil-form">
      {% csrf_token %}

      <div class="card shadow-sm border-0">
        <div class="card-body p-4">
          <div class="row g-4 align-items-center">
            <div class="col-md-4 text-center">
              {{ foto_form.foto }} Haz click para editar
              <label
                for="{{ foto_form.foto.id_for_label }}"
                class="profile-pic-label"
                title="Haz click para cambiar tu foto"
              >
                {% if user.perfil.foto %}
                <img
                  src="{{ user.perfil.foto.url }}"
                  alt="Foto de perfil"
                  class="img-thumbnail rounded-circle mb-3"
                  width="150"
                  height="150"
                  style="object-fit: cover"
                  id="foto-preview"
                />
                {% else %}
                <img
                  src="{% static 'imagenes/default-user.png' %}"
                  alt="Foto por defecto"
                  class="img-thumbnail rounded-circle mb-3"
                  width="150"
                  height="150"
                  style="object-fit: cover"
                  id="foto-preview"
                />
                {% endif %}
              </label>
            </div>
            <div class="col-md-8">
              <h5 class="fw-bold mb-3">Datos de Usuario</h5>
              <div class="mb-3">
                <label
                  for="{{ user_form.username.id_for_label }}"
                  class="form-label"
                  >Nombre de Usuario:</label
                >
                {{ user_form.username }}
              </div>

              <div class="mb-3">
                <label
                  for="{{ user_form.email.id_for_label }}"
                  class="form-label"
                  >Email:</label
                >
                {{ user_form.email }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="mt-4">
        <button type="submit" class="btn btn-primary px-4">
          <i class="bi bi-check-lg"></i> Guardar Cambios
        </button>
        <a
          href="{% url 'usuarios:perfil' %}"
          class="btn btn-outline-secondary px-4"
        >
          <i class="bi bi-x-lg"></i> Cancelar
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %} {% block styles %}
<style>
  .perfil-form input[type="text"],
  .perfil-form input[type="email"] {
    display: block;
    width: 100%;
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: #212529;
    background-color: #fff;
    border: 1px solid #ced4da;
    border-radius: 0.375rem;
    transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }

  .perfil-form input[type="text"]:focus,
  .perfil-form input[type="email"]:focus {
    border-color: #007bff;
    outline: 0;
    box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
  }

  .perfil-form input[type="file"] {
    display: none;
  }

  .profile-pic-label {
    display: inline-block;
    cursor: pointer;
  }

  .profile-pic-label:hover img {
    filter: brightness(0.8);
    transition: filter 0.2s ease;
  }
</style>
{% endblock %} {% block scripts %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const fileInput = document.getElementById(
      "{{ foto_form.foto.id_for_label }}"
    );

    const previewImage = document.getElementById("foto-preview");

    fileInput.addEventListener("change", function () {
      if (fileInput.files && fileInput.files[0]) {
        const reader = new FileReader();

        reader.onload = function (e) {
          previewImage.src = e.target.result;
        };

        reader.readAsDataURL(fileInput.files[0]);
      }
    });
  });
</script>
{% endblock %}
